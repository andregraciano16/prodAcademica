<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				template="./template.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"  
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui">
	<ui:define name="Conteudo">
		<h:form id="idFormulario">

			<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<div class="row">
								<ol class="breadcrumb" style="color: blue; background: #30a5ff">
									<div class="titulo-centro-grande">Histórico</div>
								</ol>
							</div>
						</div>
						
						<div class="panel-body">
						
							<p:messages id="message" globalOnly="true" closable="true" />
									
									
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
										
									 <p:outputLabel for="idDataAlt" 
									 				value="Data de Alteração: " 
									 				styleClass="control-label" />
								<br/>	 				
									 				
									 <h:inputText id="idDataAlt" 
									        			 value="#{historicoMB.historico.dataAlteracao}"
									        			 class= "form-control">
									        	<f:convertDateTime locale="pt" pattern="dd/MM/yyyy"/>
									 </h:inputText>
										
										
								</div>

							</div>	
								
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idAlunos" 
										value="Aluno:"
										styleClass="control-label" />
										
									<br/>
									
									<h:selectOneMenu value="#{historicoMB.historico.aluno}"
													 id="idAlunos"
													 styleClass="form-control">
										
										<f:selectItem  itemLabel="--Selecione--" 
													   itemValue=""/>
										<f:selectItems value="#{historicoMB.alunos}"
													   var="linha" 
													   itemValue="#{linha}" 
													   itemLabel="#{linha.nome}"/>
													   
									</h:selectOneMenu>
										
										
								</div>

							</div>
							
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idDocentes" 
										value="Docente:"
										styleClass="control-label" />
										
									<br/>
									
									<h:selectOneMenu value="#{historicoMB.historico.docente}"
													 id="idDocentes"
													 styleClass="form-control">
										
										<f:selectItem  itemLabel="--Selecione--" 
													   itemValue=""/>
										<f:selectItems value="#{historicoMB.docentes}"
													   var="linha" 
													   itemValue="#{linha}" 
													   itemLabel="#{linha.nome}"/>
													   
									</h:selectOneMenu>
										
										
								</div>

							</div>
							
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idProducoes" 
										value="Produção Acadêmica:"
										styleClass="control-label" />
										
									<br/>
									
									<h:selectOneMenu value="#{historicoMB.historico.producaoAcademica}"
													 id="idProducoes"
													 styleClass="form-control">
										
										<f:selectItem  itemLabel="--Selecione--" 
													   itemValue=""/>
										<f:selectItems value="#{historicoMB.producoes}"
													   var="linha" 
													   itemValue="#{linha}" 
													   itemLabel="#{linha.titulo}"/>
													   
									</h:selectOneMenu>
										
										
								</div>

							</div>
							
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idProjetos" 
										value="Projeto:"
										styleClass="control-label" />
										
									<br/>
									
									<h:selectOneMenu value="#{historicoMB.historico.projeto}"
													 id="idProjetos"
													 styleClass="form-control">
										
										<f:selectItem  itemLabel="--Selecione--" 
													   itemValue=""/>
										<f:selectItems value="#{historicoMB.projetos}"
													   var="linha" 
													   itemValue="#{linha}" 
													   itemLabel="#{linha.nome}"/>
													   
									</h:selectOneMenu>
										
										
								</div>

							</div>
							

							
							<br/>
							<br/>
							<br/>
							<br/>
							<div class="form-group" style="padding-top:70px;text-align:right;">

								<p:commandButton value="Cadastrar" 
											     class="btn-primary btn-md" 
											     action="#{historicoMB.cadastrar(historicoMB.historico)}" 
											     update="@form"
											     styleClass="btn btn-primary" 
											     id="btnCadastrar"/>
								&nbsp;&nbsp;			     
								<p:commandButton value="Pesquisar" 
											     title="Pesquisar"
												 actionListener="#{historicoMB.buscar}" 
												 update="@form"
												 styleClass="btn btn-default"
												 id="btnPesquisar"/>
								&nbsp;&nbsp;
								<p:commandButton value="Limpar" 
											     title="Limpar"
												 actionListener="#{historicoMB.limpar}" 
												 update="@form"
												 styleClass="btn btn-primary"
												 id="btnLimpar"/>
									
							</div>
							
							<br/>
							<br/>
						</div>
					</div>
							<div class="panel panel-default">
							<div class="panel-body">				 
							<p:dataTable id="idTable" var="item" value="#{historicoMB.historicos}" editable="true"
						                 styleClass="table table-striped table-bordered table-hover" paginator="true" 
						                 rowsPerPageTemplate="10,20,30" currentPageReportTemplate="{startRecord} de {endRecord}"
						                 paginatorPosition="bottom" emptyMessage="Não foram encontrados registros"
						                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
											
									<p:ajax event="rowEdit" 
											listener="#{historicoMB.editar}" 
											update="idFormulario:idTable"/>
											
									<p:ajax event="rowEditCancel" 
											listener="#{historicoMB.cancela}"
											update="idFormulario:idTable"/>
											
										<p:column headerText="Data" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.dataAlteracao}" >
														<f:convertDateTime locale="pt" pattern="dd/MM/yyyy"/>
													</h:outputText>
												</f:facet>
											
												<f:facet name="input">
													<h:inputText id="idDataAlt" 
									        			 value="#{historicoMB.editavel.dataAlteracao}"
									        			 class= "form-control">
									        			<f:convertDateTime locale="pt" pattern="dd/MM/yyyy"></f:convertDateTime>
									 				</h:inputText>
												</f:facet>
											
											</p:cellEditor>
												
										</p:column>

										<p:column headerText="Aluno" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.aluno.nome}" />
												</f:facet>
											
												<f:facet name="input">
													<h:selectOneMenu value="#{historicoMB.editavel.aluno}" 
																	 id="dropAlunosEdit"
																	 styleClass="form-control">
																	 
														<f:selectItems value="#{historicoMB.alunos}"
																	   var="linha" 
																	   itemValue="#{linha}" 
																	   itemLabel="#{linha.nome}"/>
																	   
													</h:selectOneMenu>
												</f:facet>
											
												</p:cellEditor>
												
										</p:column>

										<p:column headerText="Docente" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.docente.nome}" />
												</f:facet>
											
												<f:facet name="input">
													<h:selectOneMenu value="#{historicoMB.editavel.docente}" 
																	 id="dropDocentesEdit"
																	 styleClass="form-control">
																	 
														<f:selectItems value="#{historicoMB.docentes}"
																	   var="linha" 
																	   itemValue="#{linha}" 
																	   itemLabel="#{linha.nome}"/>
																	   
													</h:selectOneMenu>
												</f:facet>
											
												</p:cellEditor>
											
										</p:column>
										
										<p:column headerText="Produção Acadêmica" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.producaoAcademica.titulo}" />
												</f:facet>
											
												<f:facet name="input">
													<h:selectOneMenu value="#{historicoMB.editavel.producaoAcademica}" 
																	 id="dropProducoesEdit"
																	 styleClass="form-control">
																	 
														<f:selectItems value="#{historicoMB.producoes}"
																	   var="linha" 
																	   itemValue="#{linha}" 
																	   itemLabel="#{linha.titulo}"/>
																	   
													</h:selectOneMenu>
												</f:facet>
											
												</p:cellEditor>
												
										</p:column>
										
										<p:column headerText="Projeto" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.projeto.nome}" />
												</f:facet>
											
												<f:facet name="input">
													<h:selectOneMenu value="#{historicoMB.editavel.projeto}" 
																	 id="dropProjetosEdit"
																	 styleClass="form-control">
																	 
														<f:selectItems value="#{historicoMB.projetos}"
																	   var="linha" 
																	   itemValue="#{linha}" 
																	   itemLabel="#{linha.nome}"/>
																	   
													</h:selectOneMenu>
												</f:facet>
											
												</p:cellEditor>
												
										</p:column>
										
										
										<p:column headerText="Ações" 
												  styleClass="coluna-acao">
										
											<p:rowEditor/>
											&nbsp;
											<p:commandLink action="#{historicoMB.excluir(item)}"  update="@form">
												   <span class="glyphicon glyphicon-trash" />
											 
														   	 
												<p:confirm message="Tem certeza que deseja apagar?" 
														   header="Aviso"  
														   icon="ui-icon-alert"/>
															
											 </p:commandLink>

										</p:column>
										
								</p:dataTable>
								
								<p:confirmDialog global="true" >
								
									<p:commandButton value="Sim" 
													 type="button" 
													 icon="ui-icon-check"
													 styleClass="ui-confirmdialog-yes"/>
													 
									<p:commandButton value="Não"
													 type="button"
													 icon="ui-icon-close"
													 styleClass="ui-confirmdialog-no"/>
											
								</p:confirmDialog>

						</div>
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>