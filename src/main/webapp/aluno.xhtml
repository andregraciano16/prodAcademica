<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				template="./template.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"  
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui">
	<ui:define name="Conteudo">
			<h:form id="idFormulario">
			         
					<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
			            <div class="col-lg-12">
			                <div class="panel panel-default">
			                <div class="panel-heading">
					        <div class = "row">
								<ol class="breadcrumb" style="color:blue;background: #30a5ff">
									<div class="titulo-centro-grande"> Aluno </div>
							    </ol>
							</div>
							</div>
							<div class="panel-body">
														
								<p:messages id="message" globalOnly="true" closable="true" />
									
									
								  <div class="row">
									   <div class="col-md-4">
										    <p:outputLabel for="idMatricula" value="Matricula:" styleClass="control-label"/>
											<h:inputText value="#{alunoMB.aluno.matricula}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idMatricula"/>
										</div>
										<div class="col-md-8">
										    <p:outputLabel for="idNome" value="Nome:" styleClass="control-label"/>
											<h:inputText value="#{alunoMB.aluno.nome}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idNome"/>
										</div>
									</div>
									<div class="row">
										<div class="col-md-4">
										    <div class="form-group">
										    <p:outputLabel for="idSelSex" value="Sexo:" styleClass="control-label"/>
										       <h:selectOneMenu id="idSelSex"  value="#{alunoMB.aluno.sexo}" styleClass="form-control">
										           <f:selectItem itemLabel="Masculino" itemValue="M" />
										           <f:selectItem itemLabel="Feminino" itemValue="F" />
										       </h:selectOneMenu>
									        </div>
								        </div>
								        <div class="col-md-4">
										    <p:outputLabel for="idCelular" value="Celular:" styleClass="control-label"/>
											<h:inputText value="#{alunoMB.aluno.celular}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idCelular"/>
										</div>
										<div class="col-md-4">
										    <p:outputLabel for="idFixo" value="Telefone Fixo:" styleClass="control-label"/>
											<h:inputText value="#{alunoMB.aluno.telefoneFixo}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idFixo"/>
										</div>
									</div>
									<div class="row">
											
								        <div class="col-md-4"> 	
									        <p:outputLabel for="idDataNasc" value="Data Nascimento: " styleClass="control-label" />
									        <p:calendar id="idDataNasc" value="#{alunoMB.aluno.dataNascimento}" styleClass="form-control" />
								        </div>
								        
								        <div class="col-md-4">
	                               		    <div class="form-group">
												<p:outputLabel for="idStatusAluno" value="Status do aluno:" styleClass="control-label" />
										        <h:selectOneMenu value="#{alunoMB.editavel.statusAluno}"
														id="idStatusAluno"
														styleClass="form-control">
														<f:selectItem  itemLabel="--Selecione--" itemValue=""/>
														<f:selectItems value="#{alunoMB.variosStatus}"
															var="linhaSA" itemValue="#{linhaSA}"
															itemLabel="#{linhaSA.descricao}" />
													</h:selectOneMenu>
										        
									        </div>
								        </div>				
									</div>
									
									<div class = "row">
										<div class="col-md-4">
										    <p:outputLabel for="idEstado" value="Estado" styleClass="control-label"/>
											<h:inputText value="#{enderecoMB.endereco.estado}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idEstado"/>
										</div>
										<div class="col-md-4">
										    <p:outputLabel for="idCidade" value="Cidade:" styleClass="control-label"/>
											<h:inputText value="#{enderecoMB.endereco.cidade}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idCidade"/>
										</div>
										<div class="col-md-4">
										    <p:outputLabel for="idBairro" value="Bairro:" styleClass="control-label"/>
											<h:inputText value="#{enderecoMB.endereco.bairro}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idBairro"/>
										</div>
									</div>
									
									<div class = "row">
										<div class="col-md-4">
										    <p:outputLabel for="idEndRua" value="Rua:" styleClass="control-label"/>
											<h:inputText value="#{enderecoMB.endereco.rua}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idEndRua"/>
										</div>
										<div class="col-md-4">
										    <p:outputLabel for="idEndCompl" value="Complemento:" styleClass="control-label"/>
											<h:inputText value="#{enderecoMB.endereco.complemento}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idEndCompl"/>
										</div>
										<div class="col-md-4">
										    <p:outputLabel for="idEndNum" value="Número" styleClass="control-label"/>
											<h:inputText value="#{enderecoMB.endereco.numero}" 
												         class= "form-control" 
												         maxlength="10"
												         id="idEndNum"/>
										</div>
									</div>
									
		                            <br/>
		                          <div class="form-group" style="padding-top:70px;text-align:right;">

								<p:commandButton value="Cadastrar" 
											     class="btn-primary btn-md" 
											     action="#{historicoMB.cadastrar(historicoMB.historico)}" 
											     update="@form"
											     styleClass="btn btn-primary" 
											     id="btnCadastrar"/>
								&nbsp;&nbsp;			     
								<p:commandButton value="Pesquisar" 
											     title="Pesquisar"
												 actionListener="#{historicoMB.buscar}" 
												 update="@form"
												 styleClass="btn btn-default"
												 id="btnPesquisar"/>
								&nbsp;&nbsp;
								<p:commandButton value="Limpar" 
											     title="Limpar"
												 actionListener="#{historicoMB.limpar}" 
												 update="@form"
												 styleClass="btn btn-primary"
												 id="btnLimpar"/>
									
							</div>
									<br />
									<br /> 
									
									
						</div>
					</div>
							<div class="panel panel-default">
							<div class="panel-body">
							<p:dataTable id="idTable" var="item" value="#{alunoMB.alunos}" editable="true"
						                 styleClass="table table-striped table-bordered table-hover" paginator="true" 
						                 rowsPerPageTemplate="10,20,30" currentPageReportTemplate="{startRecord} de {endRecord}"
						                 paginatorPosition="bottom" emptyMessage="Não foram encontrados registros"
						                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
										
										<p:ajax event="rowEdit" 
												listener="#{alunoMB.editar}"
												update="idFormulario:idTable" />
												
										<p:ajax event="rowEditCancel"
												listener="#{alunoMB.cancela}" 
												update="idFormulario:idTable" />

										<p:column headerText="Matrícula">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.matricula}" />
												</f:facet>

												<f:facet name="input">
													<h:inputText value="#{alunoMB.editavel.matricula}"
														validatorMessage="A matricula não pode ser maior que 11 caracteres.">
														<f:validateLength maximum="11" />
													</h:inputText>
												</f:facet>

											</p:cellEditor>

										</p:column>
										
										<p:column headerText="Nome">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.nome}" />
												</f:facet>

												<f:facet name="input">
													<h:inputText value="#{alunoMB.editavel.nome}"
														required="true"
														requiredMessage=" O campo nome é necessário."
														validatorMessage="A nome não pode ser maior que 200 caracteres.">
														<f:validateLength maximum="200" />
													</h:inputText>
												</f:facet>

											</p:cellEditor>

										</p:column>
										
										<p:column headerText="Telefone fixo">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.telefoneFixo}" />
												</f:facet>

												<f:facet name="input">
													<h:inputText value="#{alunoMB.editavel.telefoneFixo}"
														validatorMessage="O telefone não pode ser maior que 10 caracteres.">
														<f:validateLength maximum="10" />
													</h:inputText>
												</f:facet>

											</p:cellEditor>

										</p:column>

										<p:column headerText="Celular">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.celular}" />
												</f:facet>

												<f:facet name="input">
													<h:inputText value="#{alunoMB.editavel.celular}"
														validatorMessage="O celular não pode ser maior que 11 caracteres.">
														<f:validateLength maximum="11" />
													</h:inputText>
												</f:facet>

											</p:cellEditor>

										</p:column>
										
										<p:column headerText="Celular">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.sexo}" />
												</f:facet>

												<f:facet name="input">
													<p:selectOneRadio value="#{alunoMB.aluno.sexo}"
													id="rdEditSexo">
   														<f:selectItem itemValue="M" itemLabel="Masculino" />
   														<f:selectItem itemValue="F" itemLabel="Feminino" />
												</p:selectOneRadio>
												</f:facet>

											</p:cellEditor>

										</p:column>
										
										<p:column headerText="Data de Nascimento">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.dataNascimento}" />
												</f:facet>

												<f:facet name="input">
													<p:calendar id="idDataAlt" 
									 			 				value="#{alunoMB.editavel.dataNascimento}" 
									 			 				styleClass="form-control" />
												</f:facet>

											</p:cellEditor>
											
										</p:column>
										
										<p:column headerText="Data de Cadastro">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.dataCadastro}" />
												</f:facet>

												<f:facet name="input">
													<h:outputText value="#{item.dataCadastro}" />
												</f:facet>

											</p:cellEditor>
											
										</p:column>
										
										<p:column headerText="Endereço">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.endereco.cidade}" />
												</f:facet>

												<f:facet name="input">
													<p:selectOneMenu>
													<h:commandLink value="Clique para editar..." />						
													</p:selectOneMenu>
												</f:facet>

											</p:cellEditor>

										</p:column>

										<p:column headerText="Curso">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.curso.nome}" />
												</f:facet>

												<f:facet name="input">
													<p:selectOneMenu
														value="#{alunoMB.editavel.curso}"
														id="dropCursosEdit">
														<f:selectItems value="#{alunoMB.corsos}"
															var="linhaC" itemValue="#{linhaC}"
															itemLabel="#{linhaC.nome}" />
													</p:selectOneMenu>
												</f:facet>

											</p:cellEditor>

										</p:column>
										
										<p:column headerText="Status do Aluno">

											<p:cellEditor>

												<f:facet name="output">
													<h:outputText value="#{item.statusAluno.descricao}" />
												</f:facet>

												<f:facet name="input">
													<p:selectOneMenu
														value="#{alunoMB.editavel.statusAluno}"
														id="dropStatusAlunoEdit">
														<f:selectItems value="#{alunoMB.variosStatus}"
															var="linhaSA" itemValue="#{linhaSA}"
															itemLabel="#{linhaSA.descricao}" />
													</p:selectOneMenu>
												</f:facet>

											</p:cellEditor>

										</p:column>
										

									<p:column headerText="Ações" 
												  styleClass="coluna-acao">
										
											<p:rowEditor/>
											&nbsp;
											<p:commandLink action="#{statusAlunoMB.excluir(item)}"  update="@form">
												   <span class="glyphicon glyphicon-trash" />
											 
														   	 
												<p:confirm message="Tem certeza que deseja apagar?" 
														   header="Aviso"  
														   icon="ui-icon-alert"/>
															
											 </p:commandLink>

										</p:column>
										
									</p:dataTable>
									<p:confirmDialog global="true">
										<p:commandButton value="Sim" type="button"
											icon="ui-icon-check" styleClass="ui-confirmdialog-yes" />
										<p:commandButton value="Não" type="button"
											icon="ui-icon-close" styleClass="ui-confirmdialog-no" />
									</p:confirmDialog>
                                   
								</div>	
							</div>
						</div>
					</div>
		    </h:form>
	</ui:define>
</ui:composition>