<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
				template="./template.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"  
				xmlns:h="http://java.sun.com/jsf/html"
				xmlns:f="http://java.sun.com/jsf/core"
				xmlns:p="http://primefaces.org/ui">
	<ui:define name="Conteudo">
		<h:form id="idFormulario">

			<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<div class="row">
								<ol class="breadcrumb" style="color: blue; background: #30a5ff">
									<div class="titulo-centro-grande">Projeto</div>
								</ol>
							</div>
						</div>
						
						<div class="panel-body">
						
						<p:messages id="message" globalOnly="true" closable="true" />
											
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idNome" 
										value="Nome:"
										styleClass="control-label" />
										
									<h:inputText value="#{projetoMB.projeto.nome}"
										class="form-control" 
										maxlength="200" 
										id="idNome" 
										validatorMessage="A descrição não pode ser maior que 200 caracteres."/>
										
										
								</div>

							</div>	
								
							<div class="row">

								<div class="col-md-12">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idDescricao" 
										value="Descrição:"
										styleClass="control-label" />
										
									<h:inputTextarea value="#{projetoMB.projeto.descricao}"
										class="form-control" 
										maxlength="200" 
										id="idDescricao" 
										validatorMessage="A descrição não pode ser maior que 200 caracteres."/>
										
										
								</div>

							</div>
							
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idOrgaoFinanciador" 
										value="Orgão financiador:"
										styleClass="control-label" />
										
									<h:inputText value="#{projetoMB.projeto.orgaoFinanciador}"
										class="form-control" 
										maxlength="45" 
										id="idOrgaoFinanciador" 
										validatorMessage="O orgão financiador não pode ser maior que 45 caracteres."/>
										
								</div>

							</div>
							
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								<p:outputLabel for="idDadosOficiais" 
											   value="Dados oficias:"
											   styleClass="control-label" />
										
									<h:inputText value="#{projetoMB.projeto.dadosOficiais}"
												 class="form-control" 
												 maxlength="45" 
												 id="idDadosOficiais" 
												 validatorMessage="Dados oficiais não pode ser maior que 45 caracteres."/>
							
								</div>

							</div>
							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idTiposProjeto" 
										value="Tipo de projeto:"
										styleClass="control-label" />
										
									<br/>
									
									<h:selectOneMenu value="#{projetoMB.projeto.tipoProjeto}"
													 id="idTiposProjeto"
													 styleClass="form-control">
										
										<f:selectItem  itemLabel="--Selecione--" 
													   itemValue=""/>
										<f:selectItems value="#{projetoMB.tiposProjeto}"
													   var="linha" 
													   itemValue="#{linha}" 
													   itemLabel="#{linha.tipo}"/>
													   
									</h:selectOneMenu>
										
										
								</div>

							</div>
							

							<div class="row">

								<div class="col-md-8">
								
								<br/>
								<br/>
								
									<p:outputLabel for="idLinhasPesquisa" 
										value="Linha de pesquisa:"
										styleClass="control-label" />
										
									<br/>
									
									<h:selectOneMenu value="#{projetoMB.projeto.linhaPesquisa}"
													 id="idLinhasPesquisa"
													 styleClass="form-control">
										
										<f:selectItem  itemLabel="--Selecione--" 
													   itemValue=""/>
										<f:selectItems value="#{projetoMB.linhasPesquisa}"
													   var="linha" 
													   itemValue="#{linha}" 
													   itemLabel="#{linha.descricao}"/>
													   
									</h:selectOneMenu>
										
										
								</div>

							</div>
							<br/>
							<br/>

							<div class="form-group" style="padding-top:70px;text-align:right;">

								<p:commandButton value="Cadastrar" 
											     class="btn-primary btn-md" 
											     action="#{projetoMB.cadastrar(projetoMB.projeto)}" 
											     update="@form"
											     styleClass="btn btn-primary" 
											     id="btnCadastrar"/>
								&nbsp;&nbsp;			     
								<p:commandButton value="Pesquisar" 
											     title="Pesquisar"
												 actionListener="#{projetoMB.buscar}" 
												 update="@form"
												 styleClass="btn btn-default"
												 id="btnPesquisar"/>
								&nbsp;&nbsp;
								<p:commandButton value="Limpar" 
											     title="Limpar"
												 actionListener="#{projetoMB.limpar}" 
												 update="@form"
												 styleClass="btn btn-primary"
												 id="btnLimpar"/>
									
							</div>
							
							<br/>
							<br/>
						</div>
					</div>
							<div class="panel panel-default">
							<div class="panel-body">				 
							<p:dataTable id="idTable" var="item" value="#{projetoMB.projetos}" editable="true"
						                 styleClass="table table-striped table-bordered table-hover" paginator="true" 
						                 rowsPerPageTemplate="10,20,30" currentPageReportTemplate="{startRecord} de {endRecord}"
						                 paginatorPosition="bottom" emptyMessage="Não foram encontrados registros"
						                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
											
											
									<p:ajax event="rowEdit" 
											listener="#{projetoMB.editar}" 
											update="idFormulario:idTable"/>
											
									<p:ajax event="rowEditCancel" 
											listener="#{projetoMB.cancela}"
											update="idFormulario:idTable"/>
											
										<p:column headerText="Nome" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.nome}" />
												</f:facet>
											
												<f:facet name="input">
														<h:inputText value="#{projetoMB.editavel.nome}"
																	 class="form-control" 
																	 maxlength="200" 
																	 id="idEditNome" 
																	 validatorMessage="O nome não pode ser maior que 200 caracteres."/>
												</f:facet>
											
											</p:cellEditor>
												
										</p:column>
										
										<p:column headerText="Descrição" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.descricao}" />
												</f:facet>
											
												<f:facet name="input">
														<h:inputText value="#{projetoMB.editavel.descricao}"
																	 class="form-control" 
																	 maxlength="45" 
																	 id="idEditDescricao" 
																	 validatorMessage="A descrição não pode ser maior que 45 caracteres."/>
												</f:facet>
											
											</p:cellEditor>
												
										</p:column>
										
										<p:column headerText="Orgão financiador" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.orgaoFinanciador}" />
												</f:facet>
											
												<f:facet name="input">
														<h:inputText value="#{projetoMB.editavel.orgaoFinanciador}"
																	 class="form-control" 
																	 maxlength="45" 
																	 id="idEditOrgaoFinanciador" 
																	 validatorMessage="Orgão financiador não pode ser maior que 45 caracteres."/>
												</f:facet>
											
											</p:cellEditor>

										</p:column>
										
										<p:column headerText="Dados Oficiais" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.dadosOficiais}" />
												</f:facet>
											
												<f:facet name="input">
														<h:inputText value="#{projetoMB.editavel.dadosOficiais}"
																	 class="form-control" 
																	 maxlength="45" 
																	 id="idEditDadosOficiais" 
																	 validatorMessage="Dados oficiais não pode ser maior que 45 caracteres."/>
												</f:facet>
											
											</p:cellEditor>
												
										</p:column>

										<p:column headerText="Tipo do projeto" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.tipoProjeto.tipo}" />
												</f:facet>
											
												<f:facet name="input">
													<h:selectOneMenu value="#{projetoMB.editavel.tipoProjeto}" 
																	 id="dropProjetosEdit"
																	 styleClass="form-control">
																	 
														<f:selectItems value="#{projetoMB.tiposProjeto}"
																	   var="linha" 
																	   itemValue="#{linha}" 
																	   itemLabel="#{linha.tipo}"/>
																	   
													</h:selectOneMenu>
												</f:facet>
											
												</p:cellEditor>
												
										</p:column>
										
										<p:column headerText="Linha de Pesquisa" >
											
											<p:cellEditor>
											
												<f:facet name="output">
													<h:outputText value="#{item.linhaPesquisa.descricao}" />
												</f:facet>
											
												<f:facet name="input">
													<h:selectOneMenu value="#{projetoMB.editavel.linhaPesquisa}" 
																	 id="dropLinhasEdit"
																	 styleClass="form-control">
																	 
														<f:selectItems value="#{projetoMB.linhasPesquisa}"
																	   var="linha" 
																	   itemValue="#{linha}" 
																	   itemLabel="#{linha.descricao}"/>
																	   
													</h:selectOneMenu>
												</f:facet>
											
												</p:cellEditor>
												
										</p:column>
											
											
											

										<p:column headerText="Ações" 
												  styleClass="coluna-acao">
										
											<p:rowEditor/>
											&nbsp;
											<p:commandLink action="#{projetoMB.excluir(item)}"  update="@form">
												   <span class="glyphicon glyphicon-trash" />
											 
														   	 
												<p:confirm message="Tem certeza que deseja apagar?" 
														   header="Aviso"  
														   icon="ui-icon-alert"/>
															
											 </p:commandLink>

										</p:column>
										
								</p:dataTable>
								
								<p:confirmDialog global="true" >
								
									<p:commandButton value="Sim" 
													 type="button" 
													 icon="ui-icon-check"
													 styleClass="ui-confirmdialog-yes"/>
													 
									<p:commandButton value="Não"
													 type="button"
													 icon="ui-icon-close"
													 styleClass="ui-confirmdialog-no"/>
											
								</p:confirmDialog>

						</div>
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>