<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" template="./template.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

	<ui:define name="Conteudo">
		<h:head>

			<title>Matéria</title>
			<h:outputStylesheet library="css" name="bootstrap.min.css" />
			<h:outputStylesheet library="css" name="datepicker3.css" />
			<h:outputStylesheet library="css" name="styles.css" />
			<h:outputStylesheet library="css" name="myStyle.css" />
			<h:outputStylesheet library="js" name="jquery-1.11.1.min.js" />
			<h:outputStylesheet library="js" name="bootstrap.min.js" />



		</h:head>
		<h:body>
			<h:form id="form" >
			
				<div class="rowDown">
					<div
						class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-3 col-md-8 col-md-offset-3">
						<div class="login-panel panel panel-default">

							<div class="titulo-centro-grande">Matéria</div>


							<div class="panel-body" id="test">
								<h:form id="formSeg" >
										<div class="row">
											<div class="col-md-12" >


												<h:messages showSummary="false" showDetail="true" styleClass="form-messages" errorClass="error" infoClass="info" id="msgInfo" />
												
												<h4 id="lblDescricao">Descrição:</h4>
												
												<h:inputText value="#{materiaMB.materia.descricao}" id="txtDescricao"
													class="form-control" autofocus="" required="true"
													requiredMessage=" O campo Descrição é necessário."
													validatorMessage="A descrição não pode ser maior que 45 caracteres.">
													<f:validateLength maximum="45" />
												</h:inputText>

												<br/>
												<h4 id="lblLinha">Linha de Pesquisa:</h4>
												<p:selectOneMenu value="#{materiaMB.materia.linhaPesquisa}" id="dropLinhas">
													<f:selectItems value="#{materiaMB.linhasPesquisa}"
													var="linha" itemValue="#{linha}" itemLabel="#{linha.descricao}"/>
												</p:selectOneMenu>


											</div>
										</div>

										<br /> <br />




										<h:commandButton value="Cadastrar" class="btn btn-primary" id="btnCadastrar"
											action="#{materiaMB.cadastrarMateria(materiaMB.materia)}" />
										&nbsp;&nbsp;
										<h:commandButton value="Pesquisar" id="btnPesquisar"
											class="btn btn-primary-cinza"
											action="#{materiaMB.buscaMateria(materiaMB.materia)}" />
										&nbsp;&nbsp;
										<h:button value="Limpar" class="btn btn-primary-cinza" id="btnLimpar"
											outcome="materia" immediate="true" />
										&nbsp;&nbsp;
										<h:commandButton value="Mostrar Todos" class="btn btn-primary" id="btnMostrar"
											action="#{materiaMB.buscaMaterias}" immediate="true" />


										<br /> <br /> <br />


										<p:growl id="msg" />
										<p:dataTable value="#{materiaMB.materias}" var="item" rows="4" paginator="true" editable="true"
											rendered="#{not empty materiaMB.materias}" width="100%">
											
											<p:ajax event="rowEdit" listener="#{materiaMB.editaMateria}" update=":form:formSeg:msg"/>
											<p:ajax event="rowEditCancel" listener="#{materiaMB.cancelaEdit}" update=":form:formSeg:msg"/>
											
											<p:column headerText="Descrição" >
											
												<p:cellEditor>
											
													<f:facet name="output">
														<h:outputText value="#{item.descricao}" />
													</f:facet>
											
													<f:facet name="input">
														<h:inputText value="#{materiaMB.editavel.descricao}" required="true"
														requiredMessage=" O campo descrição é necessário."
														validatorMessage="A descrição não pode ser maior que 45 caracteres.">
															<f:validateLength maximum="45" />
														</h:inputText>
													</f:facet>
											
												</p:cellEditor>
												
											</p:column>
											
											
											<p:column headerText="Linha de Pesquisa" >
											
												<p:cellEditor>
											
													<f:facet name="output">
														<h:outputText value="#{item.linhaPesquisa.descricao}" />
													</f:facet>
											
													<f:facet name="input">
														<p:selectOneMenu value="#{materiaMB.editavel.linhaPesquisa}" id="dropLinhasEdit">
															<f:selectItems value="#{materiaMB.linhasPesquisa}"
															var="linha" itemValue="#{linha}" itemLabel="#{linha.descricao}"/>
														</p:selectOneMenu>
													</f:facet>
											
												</p:cellEditor>
												
											</p:column>
											
											
											<p:column headerText="Ações" styleClass="coluna-acao">
												<p:rowEditor/>
												&nbsp;
												<p:commandButton icon="ui-icon-trash"
													action="#{materiaMB.excluiMateria(item)}"
													immediate="true" update="form">
												<p:confirm message="Tem certeza que deseja apagar?" header="Aviso"  icon="ui-icon-alert"/>
												</p:commandButton>

											</p:column>
										</p:dataTable>
										<p:confirmDialog global="true">
											<p:commandButton value="Sim" type="button" icon="ui-icon-check"
											styleClass="ui-confirmdialog-yes"/>
											<p:commandButton value="Não" type="button" icon="ui-icon-close"
											styleClass="ui-confirmdialog-no"/>
										</p:confirmDialog>

								</h:form>
							</div>
						</div>
					</div>
					<!-- /.col-->
				</div>
				<!-- /.row -->


			</h:form>
		</h:body>


	</ui:define>
</ui:composition>